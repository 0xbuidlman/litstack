# Charts

[[toc]]

Charts give the user an overview of what is going on on his site or in his application. Charts show Model data and can be displayed on dashboards, index pages as well as on detail pages.

## Create via Artisan

Each chart has its own config file. The artisan command `fjord:chart {name}` generates the chart config into `./fjord/app/Config/Charts`.

```shell
php artisan fjord:chart SalesCountChart
```

The chart can now be configured. Every chart type needs its corresponding Model class and a title.

```php
use App\Models\Sale;

public $model = Sale::class;

public function title()
{
    return 'Sales Count';
}
```

## DonutChart

A donut chart is generated by adding the `--donut` flag to the artisan command `fjord:chart {name}`.

```shell
php artisan fjord:chart SalesProductsChart --donut
```

The value method of the donut chart returns an array of all values, these can be calculated with the query builder that is entered as the first parameter.

```php
public function value($query): array
{
    return [
        (clone $query)->where('product', 't-shirt')->count(),
        (clone $query)->where('product', 'jacket')->count()
    ];
}
```

As well the value lables are defined in the labels method like this:

```php
public function labels(): array
{
    return [
        'T-shirt',
        'Jacket',
    ];
}
```

## Number Formatting

In the `mount` method the chart can be configured. You can set **format**, **prefixes**, **suffixes** and **currencies**.

```php
public function mount(Chart $chart)
{
    $chart->format('0,0')->prefix('$ ')->suffix(' cm');

    // The currency method adds the needed format and suffix:
    $chart->currency('â‚¬');
}
```

## Register Charts

Charts can be registered on dashboards, index pages as well as on detail pages. You only need to specify the name of the chart. The config key consists of the dot separated path and the `camel_case` name of the folders and the config file without the Config prefix.

```php
$container->chart('charts.sales_chart');
```

### Card Variant

Possible card variants: `primary`, `secondary`, `white`

```php
$container->chart('charts.sales_chart')->variant('primary');
```

The width of the chart is indicated by `width`.

```php
$container->chart('charts.sales_chart')->width(1 / 3);
```
